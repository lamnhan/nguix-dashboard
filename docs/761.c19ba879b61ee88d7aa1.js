(self.webpackChunk_lamnhan_nguix_dashboard=self.webpackChunk_lamnhan_nguix_dashboard||[]).push([[761],{1761:(t,e,n)=>{"use strict";n.r(e),n.d(e,{RegisterPageModule:()=>_});var o=n(1116),i=n(9939),r=n(1041),s=n(5366);let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.ez,r.UX,i.y4]]}),t})();var g=n(6410),c=n(6599),p=n(611),l=n(4023);function u(t,e){if(1&t&&(s.TgZ(0,"div",14),s._UZ(1,"div",15),s.qZA()),2&t){const t=s.oxw();s.xp6(1),s.Q6J("innerHtml",t.message,s.oJD)}}let d=(()=>{class t{constructor(t,e){this.authService=t,this.formBuilder=e,this.goLogin=new s.vpe,this.signedUp=new s.vpe,this.error=new s.vpe,this.lockdown=!1,this.registerFormGroup=this.formBuilder.group({email:new r.NI("",[r.kI.required,r.kI.email]),password:new r.NI("",[r.kI.required,r.kI.minLength(7)]),passwordConfirm:new r.NI("",[r.kI.required])},{validators:t=>{var e,n;return(null===(e=t.get("password"))||void 0===e?void 0:e.value)!==(null===(n=t.get("passwordConfirm"))||void 0===n?void 0:n.value)?{invalidPasswordConfirm:!0}:null}})}ngOnInit(){}signUp(){var t,e;if(this.authService&&!this.authService.authenticated&&!this.lockdown){this.beforeSignup();const n=null===(t=this.registerFormGroup.get("email"))||void 0===t?void 0:t.value,o=null===(e=this.registerFormGroup.get("password"))||void 0===e?void 0:e.value;this.authService.createUserWithEmailAndPassword(n,o).subscribe(()=>this.onSignedUp(),t=>this.onError(t))}}beforeSignup(){this.lockdown=!0,this.message=void 0}onSignedUp(){this.lockdown=!1,this.signedUp.emit()}onError(t){var e,n;null===(e=this.registerFormGroup.get("password"))||void 0===e||e.setValue(""),null===(n=this.registerFormGroup.get("passwordConfirm"))||void 0===n||n.setValue("");const{message:o}=t;this.message=o,this.lockdown=!1,this.error.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(l.e8),s.Y36(r.qu))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-register"]],outputs:{goLogin:"goLogin",signedUp:"signedUp",error:"error"},decls:23,vars:3,consts:[[1,"app-register"],["class","message margin-bottom",4,"ngIf"],[1,"form"],[3,"formGroup","ngSubmit"],["registerForm","ngForm"],[1,"group","margin-bottom"],[1,"form-label"],["type","email","formControlName","email","placeholder","Email ...",1,"form-control"],["type","password","formControlName","password","placeholder","Password ...",1,"form-control"],["type","password","formControlName","passwordConfirm","placeholder","Confirm password ...",1,"form-control"],[1,"action"],["type","submit",1,"button-primary",3,"disabled"],[1,"foot"],["href","/login",1,"button-link",3,"click"],[1,"message","margin-bottom"],[1,"alert-danger",3,"innerHtml"]],template:function(t,e){if(1&t&&(s.TgZ(0,"div",0),s.YNc(1,u,2,1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"form",3,4),s.NdJ("ngSubmit",function(){return e.signUp()}),s.TgZ(5,"label",5),s.TgZ(6,"span",6),s._uU(7,"Email"),s.qZA(),s._UZ(8,"input",7),s.qZA(),s.TgZ(9,"label",5),s.TgZ(10,"span",6),s._uU(11,"Password"),s.qZA(),s._UZ(12,"input",8),s.qZA(),s.TgZ(13,"label",5),s.TgZ(14,"span",6),s._uU(15,"Confirm"),s.qZA(),s._UZ(16,"input",9),s.qZA(),s.TgZ(17,"div",10),s.TgZ(18,"button",11),s._uU(19,"Register"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(20,"div",12),s.TgZ(21,"a",13),s.NdJ("click",function(){return e.goLogin.emit(),!1}),s._uU(22,"Login?"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){const t=s.MAs(4);s.xp6(1),s.Q6J("ngIf",e.message),s.xp6(2),s.Q6J("formGroup",e.registerFormGroup),s.xp6(15),s.Q6J("disabled",!t.form.valid||e.lockdown)}},directives:[o.O5,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u],styles:[".app-register[_ngcontent-%COMP%]{width:100%}.app-register[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center}.app-register[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%], .app-register[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.app-register[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{margin-top:1rem;text-align:center}.app-register[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.app-register[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .foot[_ngcontent-%COMP%]{text-align:center;margin-top:1rem}"]}),t})();function m(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"section",5),s.TgZ(1,"app-register",6),s.NdJ("signedUp",function(){return s.CHM(t),s.oxw(2).nav.navigate([""])})("goLogin",function(){return s.CHM(t),s.oxw(2).nav.navigate(["login"])}),s.qZA(),s.qZA()}}function h(t,e){if(1&t&&(s.TgZ(0,"div",2),s.TgZ(1,"section",3),s.TgZ(2,"h3"),s._uU(3,"Register"),s.qZA(),s.qZA(),s.YNc(4,m,2,0,"section",4),s.qZA()),2&t){const t=s.oxw();s.xp6(4),s.Q6J("ngIf",t.authChecked)}}function f(t,e){1&t&&(s.TgZ(0,"div",7),s._uU(1,"Loading ..."),s.qZA())}const v=[{path:"",component:(()=>{class t{constructor(t,e,n,o){this.metaService=t,this.settingService=e,this.nav=n,this.auth=o,this.page$=this.settingService.onLocaleChanged.pipe((0,c.b)(t=>this.metaService.changePageMetas({title:"Register",description:"Register new account"},!0))),this.authChecked=!1}ngOnInit(){this.auth.onAuthStateChanged.pipe((0,p.q)(1)).subscribe(t=>{t?this.onSignedIn():this.authChecked=!0})}onSignedIn(){const t=this.auth.redirectUrl?this.auth.redirectUrl:"";this.auth.setRedirectUrl(),this.nav.navigate([t])}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(l.Rj),s.Y36(l.RC),s.Y36(l.tZ),s.Y36(l.e8))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-register-page"]],decls:4,vars:4,consts:[["class","host",4,"ngIf","ngIfElse"],["loading",""],[1,"host"],[1,"title"],["class","main",4,"ngIf"],[1,"main"],[3,"signedUp","goLogin"],[1,"loading"]],template:function(t,e){if(1&t&&(s.YNc(0,h,5,1,"div",0),s.ALo(1,"async"),s.YNc(2,f,2,0,"ng-template",null,1,s.W1O)),2&t){const t=s.MAs(3);s.Q6J("ngIf",s.lcZ(1,2,e.page$))("ngIfElse",t)}},directives:[o.O5,d],pipes:[o.Ov],styles:[".host[_ngcontent-%COMP%]{width:100%;max-width:320px;margin:auto;padding:1rem}.host[_ngcontent-%COMP%]   section.title[_ngcontent-%COMP%]{text-align:center;margin-bottom:1rem}.loading[_ngcontent-%COMP%]{padding:2rem;display:flex;justify-content:center}"]}),t})()}];let C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[g.Bz.forChild(v)],g.Bz]}),t})(),_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.ez,i.y4,a,C]]}),t})()}}]);
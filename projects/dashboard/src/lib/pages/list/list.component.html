<div class="host dashboard page" *ngIf="data$ | async as data; else loading">

  <div class="main" *ngIf="data.part as part; else notFound">

    <ng-container *ngIf="data.items | queryFilter : query; let filteredItems">

      <section class="head">
        <div class="major">
          <div class="title">
            <h1>Posts</h1>
            <a
              class="button-outline-primary"
              [usefulRouterLink]="['admin', 'new', part.name]"
            >Add New</a>
          </div>
          <ul class="status" *ngIf="filteredItems | extractStatuses as listingStatuses">
            <li *ngFor="let listingStatus of listingStatuses">
              <strong *ngIf="listingStatus.value === status; else inactive">{{ listingStatus.title }}</strong>
              <ng-template #inactive>
                <a href="#" (click)="status=listingStatus.value; false">{{ listingStatus.title }}</a>
              </ng-template>
              <span>({{ listingStatus.count }})</span>
            </li>
          </ul>
        </div>
        <div class="filter">
          <input
            class="form-control"
            type="search"
            placeholder="Filter items ..."
            (change)="queryChanged($event)"
          >
        </div>
      </section>
    
      <section class="body">
    
        <div class="card">
          <div class="card-head"><h4>All items</h4></div>
          <ul class="card-body">
            <li *ngFor="let item of filteredItems | statusFilter : status">
  
              <div class="origin" *ngIf="item.origin; let origin">
                <a
                  [usefulRouterLink]="['admin', 'edit', part.name, origin.id]"
                >{{ origin.title }}</a>
              </div>
              
              <ul class="localized" *ngIf="data.listingLocales.length">
                <li *ngFor="let listingLocale of data.listingLocales">
                  <strong>{{ listingLocale.text }}: </strong>
                  <a
                    href="#"
                    *ngIf="item.localizedSiblings[item.origin.id] as localizedItem; else noLocalized"
                  >{{ localizedItem.title }}</a>
                  <ng-template #noLocalized>
                    <a href="#">Add Translation</a>
                  </ng-template>
                </li>
              </ul>
  
            </li>
          </ul>
          <div class="card-foot">
            1 | 2 | 3
          </div>
        </div>
    
      </section>

    </ng-container>

  </div>

  <ng-template #notFound>
    <div class="none">Not found ...</div>
  </ng-template>

</div>

<ng-template #loading>
  <div class="loading">Loading ...</div>
</ng-template>

<div class="host dashboard page" *ngIf="data$ | async as data; else loading">

  <div class="main" *ngIf="data.part as part; else notFound">
  <ng-container *ngIf="data.items | queryFilter : query; let filteredItems">

    <div class="head">

      <div class="title">
        <h1>Posts</h1>
        <a
          class="button-outline-primary"
          [usefulRouterLink]="['admin', 'new', part.name]"
        >Add New</a>
      </div>

      <ul *ngIf="filteredItems | extractStatuses as listingStatuses">
        <ng-container *ngFor="let listingStatus of listingStatuses">
          <li *ngIf="listingStatus.count">
            <strong *ngIf="listingStatus.value === status; else inactive">{{ listingStatus.title }}</strong>
            <ng-template #inactive>
              <a href="#" (click)="status=listingStatus.value; false">{{ listingStatus.title }}</a>
            </ng-template>
            <em>({{ listingStatus.count }})</em>
          </li>
        </ng-container>
      </ul>

    </div>
    
    <div class="body">

      <div class="headbar">
        <div class="filter">    
          <input
            class="form-control"
            type="search"
            placeholder="Filter items ..."
            [(ngModel)]="query"
          >    
        </div>
        <div class="count">3 items</div>
      </div>

      <table class="listing table-striped">  
        <thead>
          <tr>
            <th class="title">Title</th>
            <th class="author">Author</th>
            <th class="comment">Comment</th>
            <th class="date">Date</th>
          </tr>
        </thead>  
        <tbody>
          <tr *ngFor="let listingItem of filteredItems | statusFilter : status | paginate: {itemsPerPage: 30, currentPage: p}">
          <ng-container *ngIf="listingItem.all as items">
  
            <td class="title">  
              <ul>
                <li *ngFor="let item of items">

                  <div class="major">
                    <em>{{ data.recordLocales[item.locale].text }}</em>
                    <a [usefulRouterLink]="['admin', 'edit', part.name, item.id]"><strong>{{ item.title }}</strong></a>
                  </div>  
  
                  <ul class="actions">
                    <li><a href="#">Edit</a></li>
                    <li><a href="#">Trash</a></li>
                    <li><a href="#">Preview</a></li>
                  </ul>  
  
                  <div class="mobile-defail">
                    <button>Toggler</button>
                    <ul>
                      <li>Author: <a href="#">Lam Nhan</a></li>
                      <li>Comment: -</li>
                      <li>Date: Published 2018/10/02 at 1:04 pm</li>
                    </ul>
                  </div>

                </li>

                <ng-container *ngFor="let missingTranslation of listingItem.missingTranslations">
                <li>
                  <em>{{ data.recordLocales[missingTranslation].text }}</em>
                  <a href="#">Add Translation</a>
                </li>
                </ng-container>

              </ul>
            </td>

            <td class="author">  
              <ul>
                <li *ngFor="let item of items">
                  <a href="#">Lam Nhan</a>
                </li>
              </ul>  
            </td>

            <td class="comment">              
              <ul>
                <li *ngFor="let item of items">
                  â€”
                </li>
              </ul>  
            </td>

            <td class="date">
              <ul>
                <li *ngFor="let item of items">
                  Published 2018/10/02 at 1:04 pm
                </li>
              </ul>  
            </td>
  
          </ng-container>
          </tr>
        </tbody>  
        <tfoot>
          <tr>
            <td colspan="4">
              <pagination-controls
                (pageChange)="p=$event"
                [directionLinks]="false"
              ></pagination-controls>
            </td>
          </tr>
        </tfoot>  
      </table>

      <div class="footbar">
        <div class="count">3 items</div>
      </div>

    </div>

  </ng-container>
  </div>

  <ng-template #notFound>
    <div class="not-found">Not found ...</div>
  </ng-template>

</div>

<ng-template #loading>
  <div class="loading">Loading ...</div>
</ng-template>
